# Проектная работа "Веб-ларек"

Интернет - магазин товаров для разработчиков. Проект призван попрактиковаться в освоение TypeScript и ООП. В этом интернет магазине можно выбрать понравившийся вам товар, ознакомиться с описанием, добавить его в корзину и оформить заказ.

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Документация
### Описание данных
Для того, чтобы описать данные, которые используются в нашем проекте, было создано несколько интерфейсов.

Интерфейс конкретного товара
```
nterface IProductItem {
	// id товара
	id: string;
	// Описание товара
	description: string;
	// Изображение товара
	image: string;
	// Заголовок с названием товара
	title: string;
	// Категория товара
	category: string;
	// Цена товара
	price: number | null;
}
```

Интерфейс массива с товарами
```
interface IProductList {
	// массив с товарами
	items: IProductItem[];
}
```

Интерфейс формы заказа (Описываются данные, которые введет пользователь в формы)
```
interface IOrderForm {
	// Способ оплаты
	payment: string;
	// Электронная почта
	email: string;
	// Телефон
	phone: string;
	// Адрес
	adress: string;
	// Общая сумма заказа
	total: number | string;
}
```

Интерфейс объекта с массивом с выбранными и добавленными в корзину товарами (В массиве храняться ID выбранных в корзину товаров)
```
interface IOrder extends IOrderForm {
    items: string[];
}
```

Интерфейс состояния приложения (это интерфейс объекта, который хранит данные приложения)
```
interface IAppState {
    interface IAppState {
	// Список товаров с сервера
    catalog: IProductItem[];
	// Данные товара, добавленного в корзину
    basket: string[];
	// Данные товара, который открыт в превью
    preview: string;
	// Данные заказа, отправляемого на сервер
    order: IOrder;
	// Общая сумма товаров
    total: string | number;
	// Состояние загрузки
    loading: boolean;
}
}
```

Интерфейс объекта с результатами заказа (Информация, которую отдаст сервер после получения заказа)
```
interface IOrderResult {
    /* id заказа */
    id: string;
    /* сумма заказа */
	total: number | string;
}
```

Тип для ошибок валидации
```
type FormErrors = Partial<Record<keyof IOrder, string>>;
```

### Подход к разработке
В проекте используется модель MVP(Model - View - Presenter). Приложение разделено на модули, каждый из которых отвечает за свою часть работы.


### Базовые классы (базовый код):
Базовый код представлен несколькими классами, которые храняться в папке 'src/compronents/base'.

Класс **Api** предназначен для работы с Api. Класс хранит базовый Url и опции для сервера при иницилизации нового объекта класса. Имеет методы get(url:string){} и post(url: string, data: object){}. Первый метод get отправляет запрос на сервер и получает объект или массив объектов с запрашиваемыми данными, а метод Post отправляет данные на сервер и получает ответ. 

Класс **Component** предназначен для работы с версткой. 
Методы:
- toggleClass(element: HTMLElement, className: string, force?: boolean) {} - переключает класс у элемента,
- setTex(element: HTMLElement, value: unknown) {} - устанавливает текстовое содержимое,
- setDisabled(element: HTMLElement, state: boolean) {} - меняет статус блокировки,
- setHidden(element: HTMLElement) {} - скрывает элемент,
- setVisible(element: HTMLElement) {} - показывает элемент,
- setImag(element: HTMLImageElement, src: string, alt?: string) {} - устанавливает изображение и alt,
- render(data?: Partial<T>) {} - обновляет интерфейс(возвращает корневой Dom - элемент).

Класс **EventEmitter** = брокер событий, который соединяет модели(Model) и представление(View). Обрабатывает и передает события. Реализует следующий интерфейс
```
interface IEvents {
    on<T extends object>(event: EventName, callback: (data: T) => void): void;
    emit<T extends object>(event: string, data?: T): void;
    trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void;
}
```
В конструкторе класса EventEmitter инициализируется структура данных _events. Она представляет из себя объект с коллекцией ключ/значение. В качестве ключа выступают имена событий (EventName), а в качестве значений множетсво подписчики (Set<Subscriber>).
Класс EventEnitter включает в себя следующие методы:
- Метод on(){} устанавливает обработчик на событие. Принимает имя события и колбэк, который будет вызван при возникновении события.
- Метод off(){} снимает обработчик. Принимает имя события и колбэк, который был вызван в on(){}.
- Метод emit(){} создает событие с переданным ему именем(eventName) и необязательными данными(data), вызывает все установленные обработчики на переданное событие.
- Метод onAll(){} устанавливает обработчик на все события. В качестве аргумента передается колбэк, который срабатывает при возникновении любого события.
- Метод ofAll(){} снимает все установленные обработчики событий.
- Метод trigger(){} возвращает функцию-триггер, которая генерирует заданное событие(context).

Класс **Model** - абстрактный класс для моделей в приложении. Принимает необязательные данные data в конструкторе.
Содержит метод emitChanges(), который уведомляет об изменении в модели. Принимает имя события и необязательные данные, которые передаются вместе с событием.


### Слой Model
В слое Model находяться объекты, которые отвечают за бизнес - логику приложения, эти объекты хранят в себе данные, которые получают с сервера и из слоя View(данные товара и данные покупателя). Также эти объекты содержат в себе методы для работы с данными. 


### Слой View
В слое View находяться объекты, которые отвечают за отображение. Они содержат в себе методы, которые работают с версткой, изменяют, добавляют, удаляют классы. Также эти объекты работают с модальными окнами, с формами.


### Словй Presenter
В слое Presenter находится связующая часть между объектами Model и View. Код в Presener не будет выделен в отдельную часть, а будет размещен в основном скрипте приложения index.ts


